!function () { "use strict"; var e = { buttonAccept: { text: "Accept cookies", url: "#", id: "accept_optional_cookies", class: "button" }, buttonReject: { text: "Reject cookies", url: "#", id: "reject_optional_cookies", class: "button" }, hideThisMessage: { text: "Close this message", url: "#", id: "hide_this_message", class: "button" }, buttonPreferences: { id: "#btn_preferences" }, bannerParagraph: { id: ".cookie-p" }, bannerHeadline: { id: ".cookie_head" }, bannerWrapper: { id: "#ds-cookie-consent-banner" }, cookies: { cookieOne: "dontShowCookieNotice", cookieTwo: "cookies_policy", gaCookies: ["_ga", "_gid", "_gat_UA-2827241-22", "_gat_UA-2827241-1", "_ga_2CP7QT8TDG"], settings: ["dontAutoStartResultsTour"] }, formWrapper: { id: "#ds-cookie-consent-form" }, acceptMessageAfterInteraction: { text: "You have accepted optional cookies. You can change your cookie settings on the <a href='https://www.nationalarchives.gov.uk/legal/cookies/'>Cookies page</a>.", ariaLabel: "Cookie consent confirmation message" }, rejectMessageAfterInteraction: { text: "You have rejected optional cookies. You can change your cookie settings on the <a href='https://www.nationalarchives.gov.uk/legal/cookies/'>Cookies page</a>.", ariaLabel: "Cookie consent confirmation message" }, oldCookieBannerWrapper: { class: ".cookieNotice" }, cookiesToRemove: { one: "_ga", two: "_gid", three: "_gat_UA-2827241-1", four: "_gat_UA-2827241-22", five: "_ga_2CP7QT8TDG" }, DOM: { on: ".jsON", off: ".jsOFF" }, form: { analytics: { measure: "#measure_website_use", doNotMeasure: "#donot_measure_website_use" }, settings: { rememberSettings: "#remember_your_settings", doNotRememberSettings: "#donot_remember_your_settings" } } }; function o(e) { return o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, o(e) } function t(e, o) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); o && (n = n.filter((function (o) { return Object.getOwnPropertyDescriptor(e, o).enumerable }))), t.push.apply(t, n) } return t } function n(e, t, n) { return (t = function (e) { var t = function (e, t) { if ("object" !== o(e) || null === e) return e; var n = e[Symbol.toPrimitive]; if (void 0 !== n) { var r = n.call(e, "string"); if ("object" !== o(r)) return r; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(e) }(e); return "symbol" === o(t) ? t : String(t) }(t)) in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } var r = { createButton: function (o, t, n) { var r = document.querySelector(e.buttonPreferences.id), c = document.createElement("button"), i = document.createTextNode(o); if (r) { var a = r.parentNode; c.appendChild(i), c.className = n, c.id = t, a.insertBefore(c, r) } }, createLink: function (o, t, n, r) { var c = document.querySelector(e.buttonPreferences.id), i = document.createElement("a"), a = document.createTextNode(o); if (c) { var s = c.parentNode; i.appendChild(a), i.href = t, i.className = r, i.id = n, s.insertBefore(i, c) } }, setCookie: function (e, o, r) { r = function (e) { for (var o = 1; o < arguments.length; o++) { var r = null != arguments[o] ? arguments[o] : {}; o % 2 ? t(Object(r), !0).forEach((function (o) { n(e, o, r[o]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : t(Object(r)).forEach((function (o) { Object.defineProperty(e, o, Object.getOwnPropertyDescriptor(r, o)) })) } return e }({ path: "/", domain: "nationalarchives.gov.uk", secure: !0 }, r), r.expires instanceof Date && (r.expires = r.expires.toUTCString()); var c = encodeURIComponent(e) + "=" + encodeURIComponent(o); for (var i in r) { c += "; " + i; var a = r[i]; !0 !== a && (c += "=" + a) } document.cookie = c }, checkCookie: function (e) { return -1 !== document.cookie.indexOf(e) }, deleteCookie: function () { for (var e = document.cookie.split(";"), o = arguments.length, t = new Array(o), n = 0; n < o; n++)t[n] = arguments[n]; for (var r = function () { var o = e[c], n = o.indexOf("="), r = n > -1 ? o.substr(0, n) : o; t.forEach((function (e) { r.trim() === e && (document.cookie = "".concat(r, '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;domain="'), document.cookie = "".concat(r, "=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;domain=.nationalarchives.gov.uk"), document.cookie = "".concat(r, "=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/;domain=").concat(location.hostname.replace(/^www\./i, ""))) })) }, c = 0; c < e.length; c++)r() }, getCookieValue: function (e) { for (var o = document.cookie.split(";"), t = "", n = 0; n < o.length; n++) { var r = o[n], c = r.indexOf("="); if (t = r.slice(c + 1), (c > -1 ? r.substr(0, c).trim() : r) === e) return t = decodeURIComponent(t), JSON.parse(t) } return t } }, c = r, i = document.querySelector(e.bannerWrapper.id), a = document.querySelector(e.formWrapper.id), s = c.getCookieValue(e.cookies.cookieTwo), u = document.querySelector(e.form.analytics.measure), d = document.querySelector(e.form.analytics.doNotMeasure), l = document.querySelector(e.form.settings.rememberSettings), m = document.querySelector(e.form.settings.doNotRememberSettings);[Element.prototype, CharacterData.prototype, DocumentType.prototype].forEach((function (e) { e.hasOwnProperty("remove") || Object.defineProperty(e, "remove", { configurable: !0, enumerable: !0, writable: !0, value: function () { this.parentNode.removeChild(this) } }) })), c.checkCookie(e.cookies.cookieOne) && i && i.remove(), a && (c.checkCookie(e.cookies.cookieTwo) || (i && i.remove(), d.checked = !0, m.checked = !0), i && i.remove()), document.addEventListener("DOMContentLoaded", (function () { c.checkCookie(e.cookies.cookieTwo) ? (s.hasOwnProperty("usage") && !1 === s.usage && e.cookies.gaCookies.forEach((function (e) { c.deleteCookie(e) })), s.hasOwnProperty("settings") && !1 === s.settings && e.cookies.settings.forEach((function (e) { c.deleteCookie(e) })), a && (s.hasOwnProperty("usage") && !0 === s.usage && !u.checked ? u.checked = !0 : d.checked = !0, s.hasOwnProperty("settings") && !0 === s.settings && !l.checked ? l.checked = !0 : m.checked = !0)) : (c.setCookie(e.cookies.cookieTwo, JSON.stringify({ usage: !1, settings: !1, essential: !0 }), { "max-age": 7776e3 }), e.cookies.gaCookies.forEach((function (e) { c.deleteCookie(e) }))) })), document.addEventListener("DOMContentLoaded", (function () { var o = document.querySelector(e.oldCookieBannerWrapper.class), t = document.querySelector(e.DOM.on), n = document.querySelector(e.DOM.off); if (t && (t.style.display = "block"), n && (n.style.display = "none"), o && o.remove(), i) { c.createButton(e.buttonAccept.text, e.buttonAccept.id, e.buttonAccept.class), c.createButton(e.buttonReject.text, e.buttonReject.id, e.buttonReject.class); var r = document.querySelector("#".concat(e.buttonAccept.id)), a = document.querySelector("#".concat(e.buttonReject.id)), s = document.querySelector(e.buttonPreferences.id), u = document.querySelector(e.bannerParagraph.id), d = document.querySelector(e.bannerHeadline.id), l = i.querySelector(".container"); r && r.addEventListener("click", (function (o) { o.preventDefault(), c.setCookie(e.cookies.cookieOne, "true", { "max-age": 7776e3 }), c.setCookie(e.cookies.cookieTwo, '{"usage":true,"settings":true,"essential":true}', { "max-age": 7776e3 }), c.createButton(e.hideThisMessage.text, e.hideThisMessage.id, e.hideThisMessage.class), r && r.remove(), a && a.remove(), s && s.remove(), d && d.remove(), u && (u.innerHTML = e.acceptMessageAfterInteraction.text, l.setAttribute("aria-label", e.acceptMessageAfterInteraction.ariaLabel)); var t = document.querySelector("#".concat(e.hideThisMessage.id)); t && (t.addEventListener("click", (function (o) { o.preventDefault(), c.checkCookie(e.cookies.cookieOne) && i && i.remove() })), u.focus()); var n = document.head, m = document.createElement("script"); m.id = "frontEndGA", m.src = "https://www.nationalarchives.gov.uk/wp-content/plugins/ds-cookie-consent/dist/gtm-script.js", n.appendChild(m) })), a && a.addEventListener("click", (function (o) { o.preventDefault(), c.setCookie(e.cookies.cookieOne, "true", { "max-age": 7776e3 }), c.setCookie(e.cookies.cookieTwo, '{"usage":false,"settings":false,"essential":true}', { "max-age": 7776e3 }), c.createButton(e.hideThisMessage.text, e.hideThisMessage.id, e.hideThisMessage.class), r && r.remove(), a && a.remove(), s && s.remove(), d && d.remove(), u && (u.innerHTML = e.rejectMessageAfterInteraction.text, l.setAttribute("aria-label", e.rejectMessageAfterInteraction.ariaLabel)); var t = document.querySelector("#".concat(e.hideThisMessage.id)); t && (t.addEventListener("click", (function (o) { o.preventDefault(), c.checkCookie(e.cookies.cookieOne) && i && i.remove() })), u.focus()); for (var n = 0, m = [e.cookiesToRemove.one, e.cookiesToRemove.two, e.cookiesToRemove.three, e.cookiesToRemove.four, e.cookiesToRemove.five]; n < m.length; n++) { var k = m[n]; c.checkCookie(k) && c.deleteCookie(k) } })) } })) }();